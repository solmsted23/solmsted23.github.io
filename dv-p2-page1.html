<!DOCTYPE html>
<html>
<body>
<h1>The Pacific Crest Trail</h1>
<p>This is my Data Vizualization project 2 webpage.</p>
<div class="container">
    <section class="section-one">
        <div style="
        border: 1px solid #cccccc;
        float: left;
        padding-bottom: 100px;
        margin-bottom: -100px;
        ">
        <img src="pct_map_2.jpg" height=70% alt="Pacific Crest Trail Map">
    </section>
    <section class="section-two">
        <p>The Pacific Crest trail is a continuous hiking path that runs the length of the United States from Mexico to Canada. Hikers typically **, most Northbound hikers (NOBO) starting as early as March and finishing before major snowfall in Washington in by October. Roughly 2500 hikers set out each spring to hike NOBO, and roughly Â¼ are able to finish in a continuous thru-hike. Hikers average around 25 miles per day, hiking with an average of 5 days of food in between towns, and carry a base-weight around 13lbs (the weight of all of their gear minus food, water and fuel).
        The PCT hiker survey from Halfway anywhere compiles a survey for all who attempt a PCT thru-hike each year, and provide the results to future thru-hiking classes.
        </p>
    </section>
</div>


chart = {
  const color = d3.scaleQuantize([1, 10], d3.schemeBlues[9]);
  const path = d3.geoPath();
  const format = d => `${d}%`;
  const valuemap = new Map(data.map(d => [d.id, d.rate]));

  const counties = topojson.feature(us, us.objects.counties);
  const states = topojson.feature(us, us.objects.states);
  const statemap = new Map(states.features.map(d => [d.id, d]));

  const statemesh = topojson.mesh(us, us.objects.states, (a, b) => a !== b);

  const svg = d3.create("svg")
      .attr("width", 975)
      .attr("height", 610)
      .attr("viewBox", [0, 0, 975, 610])
      .attr("style", "max-width: 100%; height: auto;");

  svg.append("g")
      .attr("transform", "translate(610,20)")
      .append(() => Legend(color, {title: "Unemployment rate (%)", width: 260}));

  svg.append("g")
    .selectAll("path")
    .data(counties.features)
    .join("path")
      .attr("fill", d => color(valuemap.get(d.id)))
      .attr("d", path)
    .append("title")
      .text(d => {
        const state = statemap.get(String(d.id).slice(0, 2));
        return `${d.properties.name}, ${state?.properties.name || "Unknown"}\n${valuemap.get(d.id)}%`;
      });

  svg.append("path")
      .datum(statemesh)
      .attr("fill", "none")
      .attr("stroke", "white")
      .attr("stroke-linejoin", "round")
      .attr("d", path);

  return svg.node();
}


Plot.plot({
  projection: "identity",
  width: 975,
  height: 610,
  color: {
    scheme: "Blues",
    type: "quantize",
    n: 9,
    domain: [1, 10],
    label: "Unemployment rate (%)",
    legend: true
  },
  marks: [
    Plot.geo(
      topojson.feature(us, us.objects.counties),
      {
        fill: (map => d => map.get(d.id))(new Map(data.map(d => [d.id, d.rate])))
      }
    ),
    Plot.geo(
      topojson.mesh(us, us.objects.states, (a, b) => a !== b),
      {stroke: "white"}
    )
  ]
})





<div class="my_slides">
        <div class="numbertext">2 / 3</div>

 Something goes here in slide 2

  </div>
    </div>


  <div class="my_slides">

      <div class="numbertext">3 / 4</div>

      <h1 style="font-size:400%;"><u>Data</u></h1>



          <script src="http://d3js.org/d3.v3.min.js"></script>
      <script>
            var margin = {top: 20, right: 20, bottom: 30, left: 40},
                width = 960 - margin.left - margin.right,
                height = 500 - margin.top - margin.bottom;

            /* 
             * value accessor - returns the value to encode for a given data object.
             * scale - maps value to a visual display encoding, such as a pixel position.
             * map function - maps from data value to display value
             * axis - sets up axis
             */ 

            // setup x 
            var xValue = function(d) { return d.Contributions;}, // data -> value
                xScale = d3.scale.linear().range([0, width]), // value -> display
                xMap = function(d) { return xScale(xValue(d));}, // data -> display
                xAxis = d3.svg.axis().scale(xScale).orient("bottom");

            // setup y
            var yValue = function(d) { return d.Deaths;}, // data -> value
                yScale = d3.scale.linear().range([height, 0]), // value -> display
                yMap = function(d) { return yScale(yValue(d));}, // data -> display
                yAxis = d3.svg.axis().scale(yScale).orient("left");

            // setup fill color
            var cValue = function(d) { return d.State;},
                color = d3.scale.category10();




            // add the graph canvas to the body of the webpage
            var svg = d3.select("body").append("svg")
             .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
             .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            // add the tooltip area to the webpage
            var tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

            // load data
            d3.csv("data.csv", function(error, data) {

              // change string (from CSV) into number format
              data.forEach(function(d) {
                d.Contributions = +d.Contributions;
                d.Deaths = +d.Deaths;
             //  console.log(d);
              });

            //   // don't want dots overlapping axis, so add in buffer to data domain
               xScale.domain([d3.min(data, xValue)-1, d3.max(data, xValue)+1]);
               yScale.domain([d3.min(data, yValue)-1, d3.max(data, yValue)+1]);

            //   // x-axis
              svg.append("g")
                  .attr("class", "x axis")
                  .attr("transform", "translate(0," + height + ")")
                  .call(xAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("x", width)
                  .attr("y", -6)
                  .style("text-anchor", "end")
                  .text("Conntributions");

            //   // y-axis
              svg.append("g")
                  .attr("class", "y axis")
                  .call(yAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("transform", "rotate(-90)")
                  .attr("y", 6)
                  .attr("dy", ".71em")
                  .style("text-anchor", "end")
                  .text("Deaths");

              // draw dots
              svg.selectAll(".dot")
                  .data(data)
                .enter().append("circle")
                  .attr("class", "dot")
                  .attr("r", 3.5)
                  .attr("cx", xMap)
                  .attr("cy", yMap)
                  .style("fill", function(d) { return color(cValue(d));}) 
                  .on("mouseover", function(d) {
                      tooltip.transition()
                           .duration(200)
                           .style("opacity", .9);
                      tooltip.html(d["State"] + "<br/> (" + xValue(d) 
                        + ", " + yValue(d) + ")")
                           .style("left", (d3.event.pageX + 5) + "px")
                           .style("top", (d3.event.pageY - 28) + "px");
                  })
                  .on("mouseout", function(d) {
                      tooltip.transition()
                           .duration(500)
                           .style("opacity", 0);
                  });

              // draw legend
              var legend = svg.selectAll(".legend")
                  .data(color.domain())
                .enter().append("g")
                  .attr("class", "legend")
                  .attr("transform", function(d, i) {
                    return "translate("+ (i * 20 + 137) + ", 6)";
                  });

              // draw legend colored rectangles
              var boxSize = 17;
              legend.append("rect")
                  .attr("x", 0)
                  .attr("width", boxSize)
                  .attr("height", boxSize)
                  .style("fill", color);

              // draw legend text
              legend.append("text")
                  .attr("x", -8.2)
                  .attr("y", 19)
                  .attr("dy", ".35em")
                  .style("text-anchor", "end")
                  .attr("transform","rotate(-43)")
                  .text(function(d) { return d;})
            });

            </script>




    </div>













</body>
</html>


